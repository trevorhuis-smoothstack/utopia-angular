<div id="agent-sidebar" class="active">
  <ul *ngIf="agent">
    <li class="agent-data" id="agent-side-top">
      <h5><strong>Agent:</strong><br />{{ agent.name }}</h5>
    </li>
    <li class="agent-logout">
      <button type="button" class="btn btn-primary" (click)="logout()">
        Logout
      </button>
    </li>
    <li class="agent-data" *ngIf="traveler">
      <h5><strong>Traveler:</strong><br />{{ traveler.name }}</h5>
    </li>
    <li class="agent-logout" *ngIf="traveler">
      <button type="button" class="btn btn-primary" (click)="newTraveler()">
        Pick New Traveler
      </button>
    </li>
    <li class="agent-features">
      <h4><strong>Features</strong></h4>
    </li>
    <li
      id="agent-book-flight"
      class="side-link side-link-active"
      (click)="openBookFlight()"
    >
      Book Flight
    </li>
    <li
      id="agent-cancel-flight"
      class="side-link"
      (click)="openCancelBooking()"
    >
      Cancel Bookings
    </li>
  </ul>
</div>

<div class="container agent-container" *ngIf="bookFlightPage">
  <h2 class="text-center">Book Flights</h2>
  <div class="select-traveler" *ngIf="!traveler">
    <div class="select-existing-traveler">
      <form [formGroup]="selectTravelerForm" *ngIf="!createTraveler">
        <fieldset>
          <legend>Select a Traveler</legend>
          <p>
            You can book flights for a traveler with their username and
            password.
          </p>
          <div class="form-group">
            <label>Username</label>
            <input
              name="email"
              class="form-control"
              formControlName="username"
            />

            <div class="form-requirement" *ngIf="invalidLogin">
              Username not found.
            </div>
          </div>
        </fieldset>
        <div class="form-buttons">
          <button class="btn btn-primary btn-block" (click)="checkTraveler()">
            Get Traveler
          </button>
        </div>
        <hr />
        <legend>Need a new traveler?</legend>
        <div class="form-buttons">
          <button
            class="btn btn-success btn-block"
            (click)="setupCreateTraveler()"
          >
            Create New Traveler
          </button>
        </div>
      </form>

      <form [formGroup]="createTravelerForm" *ngIf="createTraveler">
        <fieldset>
          <legend>Create a Traveler</legend>
          <p>
            Create a new account for your traveller. Save their username and
            password to book flights for them
          </p>
          <div class="form-group">
            <label>Traveler Name</label>
            <input name="email" class="form-control" formControlName="name" />
          </div>
          <div class="form-group">
            <label>Account Username</label>
            <input
              name="email"
              class="form-control"
              formControlName="username"
            />
            <div class="form-requirement" *ngIf="usernameTaken">
              Username already taken.
            </div>
          </div>

          <div class="form-group">
            <label>Password</label>
            <input
              name="password"
              class="form-control"
              formControlName="password"
              type="password"
            />
          </div>
          <div class="form-group">
            <label>Re-Type Password</label>
            <input name="password" class="form-control" type="password" />
          </div>
        </fieldset>
        <div class="form-buttons">
          <button
            class="btn btn-primary btn-block"
            (click)="createNewTraveler()"
          >
            Create Traveler
          </button>
        </div>
        <hr />
        <legend>Do you have your traveler's login?</legend>
        <div class="form-buttons">
          <button
            class="btn btn-success btn-block"
            (click)="createTraveler = false"
          >
            Select Existing Traveler
          </button>
        </div>
      </form>
    </div>
  </div>

  <div *ngIf="traveler">
    <app-agent-create-booking [agent]="agent" [airports]="airports" [traveler]="traveler"></app-agent-create-booking>
  </div>
</div>

<div class="container agent-container" *ngIf="cancelFlightPage">
  <app-agent-cancel-booking [agent]="agent" [airports]="airports"></app-agent-cancel-booking>
</div>
